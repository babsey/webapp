<html>
  <head>
    <title>Voltmeter</title>
    <link rel="stylesheet" href="/media/css/default.css"></link>
    <link rel="stylesheet" href="/media/css/result.css"></link>

    <script type="text/javascript" src="/media/js/protovis.min.js"></script>
    <script type="text/javascript" src="/media/js/protovis.voltmeter.js"></script>
  </head>
  
  <body>
    <div id="center">
        <div id="fig">
            <div style="text-align:right;padding-right:20;">
                <label for="scale">Scale to fit</label>
                <input checked id="scale" type="checkbox" onchange="vis.render()">
            </div>
            
            <script type="text/javascript+protovis">
                var voltmeter = {{voltmeter|safe}};
                
                var values = voltmeter.values,
                    times = voltmeter.times;
                
                var data = pv.range(0, times.length).map(function(x) {
                    return {x: times[x], y: values[x]};
                });

                /* Scales and sizing. */
                var w = 700,
                    h1 = 300,
                    h2 = 30,
                    x = pv.Scale.linear(0, data[data.length - 1].x+1).range(0, w),
                    y = pv.Scale.linear(pv.min(data, function(d) d.y)-.001, pv.max(data, function(d) d.y)+.001).range(0, h2);

                /* Interaction state. Focus scales will have domain set on-render. */
                var i = {x:100, dx:250},
                    fx = pv.Scale.linear().range(0, w),
                    fy = pv.Scale.linear().range(0, h1);

                vis = prep_vis();
                vis.render();

            </script>
        </div>
    </div>
</body>
</html>
